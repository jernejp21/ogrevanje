#ifndef _SISTEM_H
#define _SISTEM_H

/* Zaƒçetek konfiguracije */
#define SD_CS PD3
#define LCD_CS PB0
#define LCD_DC PC7
#define LCD_RES PA9
#define ENC_A PD4
#define ENC_B PA15
#define ENC_BT PD0
#define ENKODER_ROTACIJA_BREZ 0
#define ENKODER_ROTACIJA_URA 1
#define ENKODER_ROTACIJA_KONT_URA -1
#define TEMP_ZALOG_AIN PB1
#define TEMP_KROG_1_AIN PB11
#define TEMP_KROG_2_AIN PB12
#define CRPAKLA_KROG_1_DOUT PB5
#define MES_VENT_HLAD_KROG_1_DOUT PB3
#define MES_VENT_TOPL_KROG_1_DOUT PA10
#define CRPAKLA_KROG_2_DOUT PA8
#define MES_VENT_HLAD_KROG_2_DOUT PB14
#define MES_VENT_TOPL_KROG_2_DOUT PB4
#define TERMOSTAT_VKLOP_KROG1_DIN PC2
#define TERMOSTAT_VKLOP_KROG2_DIN PC3
#define CD PB7

#define SD_VSTAVLJENA 0
#define SD_NI_VSTAVLJENA 1

#define LOGIKA_VHOD 0  // 0 negativna - nizko stanje za vklop, 1 pozitivna - visoko stanje za vklop
#define VKLOP_VHOD (LOGIKA_VHOD)
#define IZKLOP_VHOD (!LOGIKA_VHOD)

#define LOGIKA_IZHOD 0  // 0 negativna - nizko stanje za vklop, 1 pozitivna - visoko stanje za vklop
#define VKLOP_IZHOD (LOGIKA_IZHOD)
#define IZKLOP_IZHOD (!LOGIKA_IZHOD)

#define LCD_LED PC13
#define EKRAN_GLAVNI_ZASLON 0
#define EKRAN_MENI_ZASLON 1

#define STATE_IDLE 0
#define STATE_ACTIVE_SCREEN 1
#define STATE_MENU_SCREEN 2
#define STATE_LEAVE_MENU 3


#define MS_V_MIN (1000*60)
#define CAS_IZKLOPA_CRPALKE (5*MS_V_MIN)
#define KP_FAKTOR 10
#define KI_FAKTOR 0.1
#define KD_FAKTOR 100

#define UPOR 1000 // omov
#define ADC_RESOLUCIJA 10  // bitov
#define ADC_MAX_VREDNOST (1 << ADC_RESOLUCIJA)
/* Konec konfiguracije */

/* Shema ogrevanja */
#define LCD_BITMAP_WIDTH 128
#define LCD_BITMAP_HEIGHT 64

const unsigned char lcd_shema[] PROGMEM = {
// 'slika_sistema, 128x64px
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0xc0, 0x97, 0x06, 0x00, 0x00, 0xbe, 0x37, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x91, 0xe6, 0xff, 0xff, 0x88, 0x30, 0xff, 0xff, 0x07, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0xf1, 0x3e, 0x40, 0x80, 0x88, 0xf7, 0x01, 0x02, 0x04, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x81, 0x26, 0x40, 0x88, 0x88, 0x34, 0x01, 0xe2, 0x04, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x81, 0x26, 0x40, 0x8c, 0x88, 0x37, 0x01, 0x12, 0x05, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x40, 0x88, 0x00, 0x00, 0x01, 0x02, 0x05, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x40, 0x88, 0x00, 0x00, 0x01, 0x82, 0x04, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x40, 0x88, 0x00, 0x00, 0x01, 0x42, 0x04, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x40, 0x88, 0x00, 0x00, 0x01, 0x22, 0x04, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0xde, 0x63, 0x40, 0xbe, 0x80, 0x17, 0x03, 0xf2, 0x05, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x12, 0x92, 0x40, 0x80, 0x80, 0x94, 0x04, 0x02, 0x04, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0xce, 0x0b, 0x41, 0x80, 0x80, 0x53, 0x08, 0x02, 0x04, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x52, 0x08, 0xc1, 0xff, 0x80, 0x54, 0x08, 0xfe, 0x07, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0xd2, 0x93, 0x80, 0x00, 0x80, 0x94, 0x04, 0x04, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x80, 0xff, 0x1f, 0x00, 0x60, 0x80, 0x00, 0x00, 0x00, 0x03, 0x04, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x80, 0x00, 0x10, 0x00, 0x20, 0x80, 0x00, 0x00, 0x00, 0x01, 0x04, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0xd5, 0x55, 0x75, 0xde, 0x23, 0x80, 0x00, 0xf0, 0x1e, 0x01, 0x04, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x80, 0x00, 0x50, 0x12, 0xfa, 0x80, 0x00, 0x90, 0xd0, 0x07, 0x04, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x80, 0x00, 0x50, 0xce, 0x8b, 0x80, 0x00, 0x70, 0x50, 0x04, 0x04, 0x00, 0x00, 0x00, 0x00, 
	0xdf, 0x9b, 0x00, 0x50, 0x12, 0x52, 0x80, 0x00, 0x90, 0x90, 0x02, 0x04, 0x00, 0x00, 0x00, 0x00, 
	0x04, 0x9a, 0x00, 0x50, 0xd2, 0x23, 0x80, 0x00, 0x90, 0x10, 0x01, 0x04, 0x00, 0x00, 0x00, 0x00, 
	0xc4, 0xfb, 0x00, 0x50, 0x00, 0x60, 0x8c, 0x00, 0x00, 0x00, 0x63, 0x04, 0xfc, 0x3f, 0x00, 0x00, 
	0x04, 0x9a, 0x00, 0x50, 0x00, 0x90, 0x8e, 0x00, 0x00, 0x80, 0x74, 0x04, 0x04, 0x20, 0x00, 0x00, 
	0xc4, 0x9b, 0x00, 0x50, 0x00, 0x90, 0xff, 0x00, 0x00, 0x80, 0xfc, 0x07, 0x04, 0x20, 0x00, 0x00, 
	0x00, 0x80, 0x00, 0x50, 0x5e, 0x62, 0x8e, 0x00, 0xf0, 0x1e, 0x73, 0x04, 0x04, 0x20, 0x00, 0x00, 
	0x00, 0x80, 0x00, 0x50, 0x52, 0x22, 0x8c, 0x00, 0x90, 0x12, 0x61, 0x04, 0x04, 0x20, 0x00, 0x00, 
	0x00, 0x80, 0x00, 0x50, 0xce, 0x73, 0x80, 0x00, 0x70, 0x9e, 0x03, 0x04, 0x04, 0x20, 0x00, 0x00, 
	0x00, 0x80, 0x00, 0x50, 0x12, 0xfa, 0x80, 0x00, 0x90, 0xd2, 0x07, 0x04, 0x04, 0x20, 0x00, 0x00, 
	0x00, 0x80, 0x00, 0x50, 0x12, 0xfa, 0x80, 0x00, 0x90, 0xde, 0x07, 0x04, 0x04, 0x20, 0x00, 0x00, 
	0x00, 0x80, 0x00, 0x50, 0x00, 0x20, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x20, 0x00, 0x00, 
	0x00, 0x80, 0x00, 0xd0, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xaf, 0x2a, 0x00, 0x00, 
	0x00, 0x80, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x26, 0x00, 0x00, 
	0x00, 0x80, 0x00, 0x10, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x04, 0x04, 0x21, 0x00, 0x00, 
	0x00, 0x80, 0x00, 0x10, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x04, 0xc4, 0x20, 0x00, 0x00, 
	0x00, 0x80, 0x00, 0x10, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x04, 0x64, 0x20, 0x00, 0x00, 
	0x00, 0x80, 0x00, 0x10, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x04, 0x84, 0x21, 0x00, 0x00, 
	0x00, 0x80, 0x00, 0x10, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x04, 0x04, 0x26, 0x00, 0x00, 
	0x00, 0x80, 0x00, 0x10, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x04, 0x04, 0x21, 0x00, 0x00, 
	0x00, 0xd5, 0x55, 0xf5, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xaf, 0x20, 0x00, 0x00, 
	0x00, 0x80, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x20, 0x00, 0x00, 
	0x00, 0x80, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x20, 0x00, 0x00, 
	0x00, 0x80, 0xff, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0x3f, 0x00, 0x00
};
/* Konec sheme ogrevanja */

#endif  //_SISTEM_H